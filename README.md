# Windmill Community Integrations Guide

[Windmill](https://www.windmill.dev/) is an Open-source developer infrastructure for internal tools (APIs, background jobs, workflows and UIs). Self-hostable alternative to Airplane, Pipedream, Superblocks and a simplified Temporal with autogenerated UIsm and custom UIs to trigger workflows and scripts as internal apps.

[Windmill Hub](https://hub.windmill.dev/) is a platform that provides Windmill's users with reusable scripts, flows, apps which interact with a variety of integrations. They were created by the community and the Windmill team itself. 

## Contributing guide

## Contributing a single or few scripts

Go directly on [Windmill Hub](https://hub.windmill.dev/), create your script, we will then review your script and approve it to make it available to all users. You can ping us on [discord](https://discord.gg/aT3NhuxSK4) if you think we've missed it.

## Contributing a whole collection of scripts for a specific integration

Follow the guide below to generate scripts for a given integration.
Once you're done, you have to test at least one of the generated script.
You might need to create an account to get credentials.
You can find a template for the test file in the template folder.
Once you've checked that it worked, create a PR with all the generated scripts, the resource type definition and the test file (DO NOT INCLUDE the actual test credentials) in the correct folder. 
The PR has to include a video of the test running and working.

### From an OpenAPI spec

We have published a [CLI (bun only)](https://www.npmjs.com/package/@windmill-labs/openapi-codegen-cli) to generate scripts from an OpenAPI spec which makes it easy to generate a large number of scripts at once.

Minimal example:
```
bunx @windmill-labs/openapi-codegen-cli --hub --schemaUrl "urlOrLocalOpenApiSpecInJsonOrYaml" --outputDir "./integrationName" --resourceTypeName "integrationName"
```

The --hub option is necessary to make sure the generated content is in the right format to be uploaded on the hub. The outputDir and the resourceTypeName have to be set as the name of the integration in lowercase and with the spaces replaced by `_`.

The CLI allows you to customise the scripts generated according to the authorisation system of the integration API. You can see all the available options below.

Here's a working example for generating scripts for GitHub
```
bunx @windmill-labs/openapi-codegen-cli \
  --hub \
  --schemaUrl "https://raw.githubusercontent.com/github/rest-api-description/main/descriptions/api.github.com/api.github.com.json" \
  --outputDir "./github" \
  --resourceTypeName "github"
```

#### Options

**Schema url**

The schema url can be a local file or a remote url. It can be a json or yaml file.

**Override base url**

Instead of using the base url from the spec file, you can override it by passing the `--baseUrl "https://api.example.com"` flag.

**Bearer auth**

By default, bearer authentication is used. It will define a token property on the resource type. You can change the name of the token property by passing the `--tokenName "token"` flag.

**Basic auth**

For basic authentication, pass the `--authKind basic` flag. By default, it will add "username" and "password" to the resource type. You can change the names of the properties in the resource type by passing the `--usernameName "username"` and `--passwordName "password"` flags.

**Query auth**

For query authentication, pass the `--authKind query` flag. By default, it will add a token property on the resource type and pass the token as a query parameter named "token". Setting tokenName will change the name of the token property as well as the name of the query parameter.

**Header auth**

For header authentication, pass the `--authKind header` flag and the `--headerName "X-CUSTOM-HEADER"` flag. Like for bearer and query auth, it will add a token property to the resource type. You can change the name of the token property in the resource type by passing the `--tokenName "token"` flag.

**Extra resource type params for path params**

You can specify parameters of the path to be included in the resource type by adding the `--extraResourceParams "extraParameter1,extraParameter2"` flag.
The generated script path will use the resource type properties instead of taking them as parameters.
This is useful when you have a path parameter (e.g. {subdomain}, {organisation_id}, etc...) that is common to all endpoints of the spec and you don't want to pass it as a parameter in each script. 

**Extra headers**

You can also specify extra headers to be passed to each request by adding the `--extraHeaders "header1:propertyName1,header2:propertyName2"` flag.
Those property names will be added to the resource type.

**Specifying tags**

You can limit the CLI to only generate scripts for a subset of the spec tags by passing the `--tags "tag1,tag2"` flag.

